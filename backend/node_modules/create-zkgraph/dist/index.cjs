"use strict";const o=require("node:fs"),i=require("node:path"),node_url=require("node:url"),require$$0=require("readline"),require$$2=require("events");var _documentCurrentScript=typeof document<"u"?document.currentScript:null;function _interopDefaultCompat(s){return s&&typeof s=="object"&&"default"in s?s.default:s}const o__default=_interopDefaultCompat(o),i__default=_interopDefaultCompat(i),require$$0__default=_interopDefaultCompat(require$$0),require$$2__default=_interopDefaultCompat(require$$2);function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function hasKey(s,t){var e=s;t.slice(0,-1).forEach(function(l){e=e[l]||{}});var r=t[t.length-1];return r in e}function isNumber$1(s){return typeof s=="number"||/^0x[0-9a-f]+$/i.test(s)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(s)}function isConstructorOrProto(s,t){return t==="constructor"&&typeof s[t]=="function"||t==="__proto__"}var minimist=function(s,t){t||(t={});var e={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(e.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?e.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(f){e.bools[f]=!0});var r={};function l(f){return r[f].some(function(p){return e.bools[p]})}Object.keys(t.alias||{}).forEach(function(f){r[f]=[].concat(t.alias[f]),r[f].forEach(function(p){r[p]=[f].concat(r[f].filter(function(O){return p!==O}))})}),[].concat(t.string).filter(Boolean).forEach(function(f){e.strings[f]=!0,r[f]&&[].concat(r[f]).forEach(function(p){e.strings[p]=!0})});var h=t.default||{},n={_:[]};function a(f,p){return e.allBools&&/^--[^=]+$/.test(p)||e.strings[f]||e.bools[f]||r[f]}function b(f,p,O){for(var g=f,F=0;F<p.length-1;F++){var E=p[F];if(isConstructorOrProto(g,E))return;g[E]===void 0&&(g[E]={}),(g[E]===Object.prototype||g[E]===Number.prototype||g[E]===String.prototype)&&(g[E]={}),g[E]===Array.prototype&&(g[E]=[]),g=g[E]}var R=p[p.length-1];isConstructorOrProto(g,R)||((g===Object.prototype||g===Number.prototype||g===String.prototype)&&(g={}),g===Array.prototype&&(g=[]),g[R]===void 0||e.bools[R]||typeof g[R]=="boolean"?g[R]=O:Array.isArray(g[R])?g[R].push(O):g[R]=[g[R],O])}function d(f,p,O){if(!(O&&e.unknownFn&&!a(f,O)&&e.unknownFn(O)===!1)){var g=!e.strings[f]&&isNumber$1(p)?Number(p):p;b(n,f.split("."),g),(r[f]||[]).forEach(function(F){b(n,F.split("."),g)})}}Object.keys(e.bools).forEach(function(f){d(f,h[f]===void 0?!1:h[f])});var M=[];s.indexOf("--")!==-1&&(M=s.slice(s.indexOf("--")+1),s=s.slice(0,s.indexOf("--")));for(var w=0;w<s.length;w++){var u=s[w],m,S;if(/^--.+=/.test(u)){var D=u.match(/^--([^=]+)=([\s\S]*)$/);m=D[1];var j=D[2];e.bools[m]&&(j=j!=="false"),d(m,j,u)}else if(/^--no-.+/.test(u))m=u.match(/^--no-(.+)/)[1],d(m,!1,u);else if(/^--.+/.test(u))m=u.match(/^--(.+)/)[1],S=s[w+1],S!==void 0&&!/^(-|--)[^-]/.test(S)&&!e.bools[m]&&!e.allBools&&(!r[m]||!l(m))?(d(m,S,u),w+=1):/^(true|false)$/.test(S)?(d(m,S==="true",u),w+=1):d(m,e.strings[m]?"":!0,u);else if(/^-[^-]+/.test(u)){for(var C=u.slice(1,-1).split(""),A=!1,T=0;T<C.length;T++){if(S=u.slice(T+2),S==="-"){d(C[T],S,u);continue}if(/[A-Za-z]/.test(C[T])&&S[0]==="="){d(C[T],S.slice(1),u),A=!0;break}if(/[A-Za-z]/.test(C[T])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(S)){d(C[T],S,u),A=!0;break}if(C[T+1]&&C[T+1].match(/\W/)){d(C[T],u.slice(T+2),u),A=!0;break}else d(C[T],e.strings[C[T]]?"":!0,u)}m=u.slice(-1)[0],!A&&m!=="-"&&(s[w+1]&&!/^(-|--)[^-]/.test(s[w+1])&&!e.bools[m]&&(!r[m]||!l(m))?(d(m,s[w+1],u),w+=1):s[w+1]&&/^(true|false)$/.test(s[w+1])?(d(m,s[w+1]==="true",u),w+=1):d(m,e.strings[m]?"":!0,u))}else if((!e.unknownFn||e.unknownFn(u)!==!1)&&n._.push(e.strings._||!isNumber$1(u)?u:Number(u)),t.stopEarly){n._.push.apply(n._,s.slice(w+1));break}}return Object.keys(h).forEach(function(f){hasKey(n,f.split("."))||(b(n,f.split("."),h[f]),(r[f]||[]).forEach(function(p){b(n,p.split("."),h[f])}))}),t["--"]?n["--"]=M.slice():M.forEach(function(f){n._.push(f)}),n};const I=getDefaultExportFromCjs(minimist);var prompts$1={};const{FORCE_COLOR,NODE_DISABLE_COLORS,TERM}=process.env,$={enabled:!NODE_DISABLE_COLORS&&TERM!=="dumb"&&FORCE_COLOR!=="0",reset:init$1(0,0),bold:init$1(1,22),dim:init$1(2,22),italic:init$1(3,23),underline:init$1(4,24),inverse:init$1(7,27),hidden:init$1(8,28),strikethrough:init$1(9,29),black:init$1(30,39),red:init$1(31,39),green:init$1(32,39),yellow:init$1(33,39),blue:init$1(34,39),magenta:init$1(35,39),cyan:init$1(36,39),white:init$1(37,39),gray:init$1(90,39),grey:init$1(90,39),bgBlack:init$1(40,49),bgRed:init$1(41,49),bgGreen:init$1(42,49),bgYellow:init$1(43,49),bgBlue:init$1(44,49),bgMagenta:init$1(45,49),bgCyan:init$1(46,49),bgWhite:init$1(47,49)};function run(s,t){let e=0,r,l="",h="";for(;e<s.length;e++)r=s[e],l+=r.open,h+=r.close,t.includes(r.close)&&(t=t.replace(r.rgx,r.close+r.open));return l+t+h}function chain(s,t){let e={has:s,keys:t};return e.reset=$.reset.bind(e),e.bold=$.bold.bind(e),e.dim=$.dim.bind(e),e.italic=$.italic.bind(e),e.underline=$.underline.bind(e),e.inverse=$.inverse.bind(e),e.hidden=$.hidden.bind(e),e.strikethrough=$.strikethrough.bind(e),e.black=$.black.bind(e),e.red=$.red.bind(e),e.green=$.green.bind(e),e.yellow=$.yellow.bind(e),e.blue=$.blue.bind(e),e.magenta=$.magenta.bind(e),e.cyan=$.cyan.bind(e),e.white=$.white.bind(e),e.gray=$.gray.bind(e),e.grey=$.grey.bind(e),e.bgBlack=$.bgBlack.bind(e),e.bgRed=$.bgRed.bind(e),e.bgGreen=$.bgGreen.bind(e),e.bgYellow=$.bgYellow.bind(e),e.bgBlue=$.bgBlue.bind(e),e.bgMagenta=$.bgMagenta.bind(e),e.bgCyan=$.bgCyan.bind(e),e.bgWhite=$.bgWhite.bind(e),e}function init$1(s,t){let e={open:`\x1B[${s}m`,close:`\x1B[${t}m`,rgx:new RegExp(`\\x1b\\[${t}m`,"g")};return function(r){return this!==void 0&&this.has!==void 0?(this.has.includes(s)||(this.has.push(s),this.keys.push(e)),r===void 0?this:$.enabled?run(this.keys,r+""):r+""):r===void 0?chain([s],[e]):$.enabled?run([e],r+""):r+""}}var kleur=$,action$1=(s,t)=>{if(!(s.meta&&s.name!=="escape")){if(s.ctrl){if(s.name==="a")return"first";if(s.name==="c"||s.name==="d")return"abort";if(s.name==="e")return"last";if(s.name==="g")return"reset"}if(t){if(s.name==="j")return"down";if(s.name==="k")return"up"}return s.name==="return"||s.name==="enter"?"submit":s.name==="backspace"?"delete":s.name==="delete"?"deleteForward":s.name==="abort"?"abort":s.name==="escape"?"exit":s.name==="tab"?"next":s.name==="pagedown"?"nextPage":s.name==="pageup"?"prevPage":s.name==="home"?"home":s.name==="end"?"end":s.name==="up"?"up":s.name==="down"?"down":s.name==="right"?"right":s.name==="left"?"left":!1}},strip$2=s=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),e=new RegExp(t,"g");return typeof s=="string"?s.replace(e,""):s};const ESC="\x1B",CSI=`${ESC}[`,beep$1="\x07",cursor$b={to(s,t){return t?`${CSI}${t+1};${s+1}H`:`${CSI}${s+1}G`},move(s,t){let e="";return s<0?e+=`${CSI}${-s}D`:s>0&&(e+=`${CSI}${s}C`),t<0?e+=`${CSI}${-t}A`:t>0&&(e+=`${CSI}${t}B`),e},up:(s=1)=>`${CSI}${s}A`,down:(s=1)=>`${CSI}${s}B`,forward:(s=1)=>`${CSI}${s}C`,backward:(s=1)=>`${CSI}${s}D`,nextLine:(s=1)=>`${CSI}E`.repeat(s),prevLine:(s=1)=>`${CSI}F`.repeat(s),left:`${CSI}G`,hide:`${CSI}?25l`,show:`${CSI}?25h`,save:`${ESC}7`,restore:`${ESC}8`},scroll={up:(s=1)=>`${CSI}S`.repeat(s),down:(s=1)=>`${CSI}T`.repeat(s)},erase$7={screen:`${CSI}2J`,up:(s=1)=>`${CSI}1J`.repeat(s),down:(s=1)=>`${CSI}J`.repeat(s),line:`${CSI}2K`,lineEnd:`${CSI}K`,lineStart:`${CSI}1K`,lines(s){let t="";for(let e=0;e<s;e++)t+=this.line+(e<s-1?cursor$b.up():"");return s&&(t+=cursor$b.left),t}};var src={cursor:cursor$b,scroll,erase:erase$7,beep:beep$1};const strip$1=strip$2,{erase:erase$6,cursor:cursor$a}=src,width=s=>[...strip$1(s)].length;var clear$9=function(s,t){if(!t)return erase$6.line+cursor$a.to(0);let e=0;const r=s.split(/\r?\n/);for(let l of r)e+=1+Math.floor(Math.max(width(l)-1,0)/t);return erase$6.lines(e)};const main={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},win={arrowUp:main.arrowUp,arrowDown:main.arrowDown,arrowLeft:main.arrowLeft,arrowRight:main.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},figures$8=process.platform==="win32"?win:main;var figures_1=figures$8;const c=kleur,figures$7=figures_1,styles=Object.freeze({password:{scale:1,render:s=>"*".repeat(s.length)},emoji:{scale:2,render:s=>"\u{1F603}".repeat(s.length)},invisible:{scale:0,render:s=>""},default:{scale:1,render:s=>`${s}`}}),render=s=>styles[s]||styles.default,symbols=Object.freeze({aborted:c.red(figures$7.cross),done:c.green(figures$7.tick),exited:c.yellow(figures$7.cross),default:c.cyan("?")}),symbol=(s,t,e)=>t?symbols.aborted:e?symbols.exited:s?symbols.done:symbols.default,delimiter=s=>c.gray(s?figures$7.ellipsis:figures$7.pointerSmall),item=(s,t)=>c.gray(s?t?figures$7.pointerSmall:"+":figures$7.line);var style$9={styles,render,symbols,symbol,delimiter,item};const strip=strip$2;var lines$2=function(s,t){let e=String(strip(s)||"").split(/\r?\n/);return t?e.map(r=>Math.ceil(r.length/t)).reduce((r,l)=>r+l):e.length},wrap$3=(s,t={})=>{const e=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",r=t.width;return(s||"").split(/\r?\n/g).map(l=>l.split(/\s+/g).reduce((h,n)=>(n.length+e.length>=r||h[h.length-1].length+n.length+1<r?h[h.length-1]+=` ${n}`:h.push(`${e}${n}`),h),[e]).join(`
`)).join(`
`)},entriesToDisplay$3=(s,t,e)=>{e=e||t;let r=Math.min(t-e,s-Math.floor(e/2));r<0&&(r=0);let l=Math.min(r+e,t);return{startIndex:r,endIndex:l}},util={action:action$1,clear:clear$9,style:style$9,strip:strip$2,figures:figures_1,lines:lines$2,wrap:wrap$3,entriesToDisplay:entriesToDisplay$3};const readline=require$$0__default,{action}=util,EventEmitter=require$$2__default,{beep,cursor:cursor$9}=src,color$9=kleur;let Prompt$8=class extends EventEmitter{constructor(t={}){super(),this.firstRender=!0,this.in=t.stdin||process.stdin,this.out=t.stdout||process.stdout,this.onRender=(t.onRender||(()=>{})).bind(this);const e=readline.createInterface({input:this.in,escapeCodeTimeout:50});readline.emitKeypressEvents(this.in,e),this.in.isTTY&&this.in.setRawMode(!0);const r=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,l=(h,n)=>{let a=action(n,r);a===!1?this._&&this._(h,n):typeof this[a]=="function"?this[a](n):this.bell()};this.close=()=>{this.out.write(cursor$9.show),this.in.removeListener("keypress",l),this.in.isTTY&&this.in.setRawMode(!1),e.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",l)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(beep)}render(){this.onRender(color$9),this.firstRender&&(this.firstRender=!1)}};var prompt$1=Prompt$8;const color$8=kleur,Prompt$7=prompt$1,{erase:erase$5,cursor:cursor$8}=src,{style:style$8,clear:clear$8,lines:lines$1,figures:figures$6}=util;class TextPrompt extends Prompt$7{constructor(t={}){super(t),this.transform=style$8.render(t.style),this.scale=this.transform.scale,this.msg=t.message,this.initial=t.initial||"",this.validator=t.validate||(()=>!0),this.value="",this.errorMsg=t.error||"Please Enter A Valid Value",this.cursor=+!!this.initial,this.cursorOffset=0,this.clear=clear$8("",this.out.columns),this.render()}set value(t){!t&&this.initial?(this.placeholder=!0,this.rendered=color$8.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(t)),this._value=t,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=+!!this.initial,this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(t){this.placeholder||(this.cursor=this.cursor+t,this.cursorOffset+=t)}_(t,e){let r=this.value.slice(0,this.cursor),l=this.value.slice(this.cursor);this.value=`${r}${t}${l}`,this.red=!1,this.cursor=this.placeholder?0:r.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let t=this.value.slice(0,this.cursor-1),e=this.value.slice(this.cursor);this.value=`${t}${e}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let t=this.value.slice(0,this.cursor),e=this.value.slice(this.cursor+1);this.value=`${t}${e}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(cursor$8.down(lines$1(this.outputError,this.out.columns)-1)+clear$8(this.outputError,this.out.columns)),this.out.write(clear$8(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[style$8.symbol(this.done,this.aborted),color$8.bold(this.msg),style$8.delimiter(this.done),this.red?color$8.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,e,r)=>t+`
${r?" ":figures$6.pointerSmall} ${color$8.red().italic(e)}`,"")),this.out.write(erase$5.line+cursor$8.to(0)+this.outputText+cursor$8.save+this.outputError+cursor$8.restore+cursor$8.move(this.cursorOffset,0)))}}var text=TextPrompt;const color$7=kleur,Prompt$6=prompt$1,{style:style$7,clear:clear$7,figures:figures$5,wrap:wrap$2,entriesToDisplay:entriesToDisplay$2}=util,{cursor:cursor$7}=src;class SelectPrompt extends Prompt$6{constructor(t={}){super(t),this.msg=t.message,this.hint=t.hint||"- Use arrow-keys. Return to submit.",this.warn=t.warn||"- This option is disabled",this.cursor=t.initial||0,this.choices=t.choices.map((e,r)=>(typeof e=="string"&&(e={title:e,value:r}),{title:e&&(e.title||e.value||e),value:e&&(e.value===void 0?r:e.value),description:e&&e.description,selected:e&&e.selected,disabled:e&&e.disabled})),this.optionsPerPage=t.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=clear$7("",this.out.columns),this.render()}moveCursor(t){this.cursor=t,this.value=this.choices[t].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(t,e){if(t===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(cursor$7.hide):this.out.write(clear$7(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:e}=entriesToDisplay$2(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[style$7.symbol(this.done,this.aborted),color$7.bold(this.msg),style$7.delimiter(!1),this.done?this.selection.title:this.selection.disabled?color$7.yellow(this.warn):color$7.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let r=t;r<e;r++){let l,h,n="",a=this.choices[r];r===t&&t>0?h=figures$5.arrowUp:r===e-1&&e<this.choices.length?h=figures$5.arrowDown:h=" ",a.disabled?(l=this.cursor===r?color$7.gray().underline(a.title):color$7.strikethrough().gray(a.title),h=(this.cursor===r?color$7.bold().gray(figures$5.pointer)+" ":"  ")+h):(l=this.cursor===r?color$7.cyan().underline(a.title):a.title,h=(this.cursor===r?color$7.cyan(figures$5.pointer)+" ":"  ")+h,a.description&&this.cursor===r&&(n=` - ${a.description}`,(h.length+l.length+n.length>=this.out.columns||a.description.split(/\r?\n/).length>1)&&(n=`
`+wrap$2(a.description,{margin:3,width:this.out.columns})))),this.outputText+=`${h} ${l}${color$7.gray(n)}
`}}this.out.write(this.outputText)}}var select=SelectPrompt;const color$6=kleur,Prompt$5=prompt$1,{style:style$6,clear:clear$6}=util,{cursor:cursor$6,erase:erase$4}=src;class TogglePrompt extends Prompt$5{constructor(t={}){super(t),this.msg=t.message,this.value=!!t.initial,this.active=t.active||"on",this.inactive=t.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(t,e){if(t===" ")this.value=!this.value;else if(t==="1")this.value=!0;else if(t==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(cursor$6.hide):this.out.write(clear$6(this.outputText,this.out.columns)),super.render(),this.outputText=[style$6.symbol(this.done,this.aborted),color$6.bold(this.msg),style$6.delimiter(this.done),this.value?this.inactive:color$6.cyan().underline(this.inactive),color$6.gray("/"),this.value?color$6.cyan().underline(this.active):this.active].join(" "),this.out.write(erase$4.line+cursor$6.to(0)+this.outputText))}}var toggle=TogglePrompt;let DatePart$9=class L{constructor({token:t,date:e,parts:r,locales:l}){this.token=t,this.date=e||new Date,this.parts=r||[this],this.locales=l||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find((e,r)=>r>t&&e instanceof L)}setTo(t){}prev(){let t=[].concat(this.parts).reverse();const e=t.indexOf(this);return t.find((r,l)=>l>e&&r instanceof L)}toString(){return String(this.date)}};var datepart=DatePart$9;const DatePart$8=datepart;let Meridiem$1=class extends DatePart$8{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}};var meridiem=Meridiem$1;const DatePart$7=datepart,pos=s=>(s=s%10,s===1?"st":s===2?"nd":s===3?"rd":"th");let Day$1=class extends DatePart$7{constructor(t={}){super(t)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(t){this.date.setDate(parseInt(t.substr(-2)))}toString(){let t=this.date.getDate(),e=this.date.getDay();return this.token==="DD"?String(t).padStart(2,"0"):this.token==="Do"?t+pos(t):this.token==="d"?e+1:this.token==="ddd"?this.locales.weekdaysShort[e]:this.token==="dddd"?this.locales.weekdays[e]:t}};var day=Day$1;const DatePart$6=datepart;let Hours$1=class extends DatePart$6{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}};var hours=Hours$1;const DatePart$5=datepart;let Milliseconds$1=class extends DatePart$5{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};var milliseconds=Milliseconds$1;const DatePart$4=datepart;let Minutes$1=class extends DatePart$4{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}};var minutes=Minutes$1;const DatePart$3=datepart;let Month$1=class extends DatePart$3{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),e=this.token.length;return e===2?String(t+1).padStart(2,"0"):e===3?this.locales.monthsShort[t]:e===4?this.locales.months[t]:String(t+1)}};var month=Month$1;const DatePart$2=datepart;let Seconds$1=class extends DatePart$2{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}};var seconds=Seconds$1;const DatePart$1=datepart;let Year$1=class extends DatePart$1{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}};var year=Year$1,dateparts={DatePart:datepart,Meridiem:meridiem,Day:day,Hours:hours,Milliseconds:milliseconds,Minutes:minutes,Month:month,Seconds:seconds,Year:year};const color$5=kleur,Prompt$4=prompt$1,{style:style$5,clear:clear$5,figures:figures$4}=util,{erase:erase$3,cursor:cursor$5}=src,{DatePart,Meridiem,Day,Hours,Milliseconds,Minutes,Month,Seconds,Year}=dateparts,regex=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,regexGroups={1:({token:s})=>s.replace(/\\(.)/g,"$1"),2:s=>new Day(s),3:s=>new Month(s),4:s=>new Year(s),5:s=>new Meridiem(s),6:s=>new Hours(s),7:s=>new Minutes(s),8:s=>new Seconds(s),9:s=>new Milliseconds(s)},dfltLocales={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class DatePrompt extends Prompt$4{constructor(t={}){super(t),this.msg=t.message,this.cursor=0,this.typed="",this.locales=Object.assign(dfltLocales,t.locales),this._date=t.initial||new Date,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.mask=t.mask||"YYYY-MM-DD HH:mm:ss",this.clear=clear$5("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(t){t&&this._date.setTime(t.getTime())}set mask(t){let e;for(this.parts=[];e=regex.exec(t);){let l=e.shift(),h=e.findIndex(n=>n!=null);this.parts.push(h in regexGroups?regexGroups[h]({token:e[h]||l,date:this.date,parts:this.parts,locales:this.locales}):e[h]||l)}let r=this.parts.reduce((l,h)=>(typeof h=="string"&&typeof l[l.length-1]=="string"?l[l.length-1]+=h:l.push(h),l),[]);this.parts.splice(0),this.parts.push(...r),this.reset()}moveCursor(t){this.typed="",this.cursor=t,this.fire()}reset(){this.moveCursor(this.parts.findIndex(t=>t instanceof DatePart)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let t=this.parts[this.cursor].prev();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}right(){let t=this.parts[this.cursor].next();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}next(){let t=this.parts[this.cursor].next();this.moveCursor(t?this.parts.indexOf(t):this.parts.findIndex(e=>e instanceof DatePart)),this.render()}_(t){/\d/.test(t)&&(this.typed+=t,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(cursor$5.hide):this.out.write(clear$5(this.outputText,this.out.columns)),super.render(),this.outputText=[style$5.symbol(this.done,this.aborted),color$5.bold(this.msg),style$5.delimiter(!1),this.parts.reduce((t,e,r)=>t.concat(r===this.cursor&&!this.done?color$5.cyan().underline(e.toString()):e),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((t,e,r)=>t+`
${r?" ":figures$4.pointerSmall} ${color$5.red().italic(e)}`,"")),this.out.write(erase$3.line+cursor$5.to(0)+this.outputText))}}var date=DatePrompt;const color$4=kleur,Prompt$3=prompt$1,{cursor:cursor$4,erase:erase$2}=src,{style:style$4,figures:figures$3,clear:clear$4,lines}=util,isNumber=/[0-9]/,isDef=s=>s!==void 0,round=(s,t)=>{let e=Math.pow(10,t);return Math.round(s*e)/e};class NumberPrompt extends Prompt$3{constructor(t={}){super(t),this.transform=style$4.render(t.style),this.msg=t.message,this.initial=isDef(t.initial)?t.initial:"",this.float=!!t.float,this.round=t.round||2,this.inc=t.increment||1,this.min=isDef(t.min)?t.min:-1/0,this.max=isDef(t.max)?t.max:1/0,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(t){!t&&t!==0?(this.placeholder=!0,this.rendered=color$4.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${round(t,this.round)}`),this._value=round(t,this.round)),this.fire()}get value(){return this._value}parse(t){return this.float?parseFloat(t):parseInt(t)}valid(t){return t==="-"||t==="."&&this.float||isNumber.test(t)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let t=this.value;this.value=t!==""?t:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let t=this.value;this.value=t!==""?t:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let t=this.value.toString();if(t.length===0)return this.bell();this.value=this.parse(t=t.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(t,e){if(!this.valid(t))return this.bell();const r=Date.now();if(r-this.lastHit>1e3&&(this.typed=""),this.typed+=t,this.lastHit=r,this.color="cyan",t===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(cursor$4.down(lines(this.outputError,this.out.columns)-1)+clear$4(this.outputError,this.out.columns)),this.out.write(clear$4(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[style$4.symbol(this.done,this.aborted),color$4.bold(this.msg),style$4.delimiter(this.done),!this.done||!this.done&&!this.placeholder?color$4[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,e,r)=>t+`
${r?" ":figures$3.pointerSmall} ${color$4.red().italic(e)}`,"")),this.out.write(erase$2.line+cursor$4.to(0)+this.outputText+cursor$4.save+this.outputError+cursor$4.restore))}}var number=NumberPrompt;const color$3=kleur,{cursor:cursor$3}=src,Prompt$2=prompt$1,{clear:clear$3,figures:figures$2,style:style$3,wrap:wrap$1,entriesToDisplay:entriesToDisplay$1}=util;let MultiselectPrompt$1=class extends Prompt$2{constructor(t={}){super(t),this.msg=t.message,this.cursor=t.cursor||0,this.scrollIndex=t.cursor||0,this.hint=t.hint||"",this.warn=t.warn||"- This option is disabled -",this.minSelected=t.min,this.showMinError=!1,this.maxChoices=t.max,this.instructions=t.instructions,this.optionsPerPage=t.optionsPerPage||10,this.value=t.choices.map((e,r)=>(typeof e=="string"&&(e={title:e,value:r}),{title:e&&(e.title||e.value||e),description:e&&e.description,value:e&&(e.value===void 0?r:e.value),selected:e&&e.selected,disabled:e&&e.disabled})),this.clear=clear$3("",this.out.columns),t.overrideRender||this.render()}reset(){this.value.map(t=>!t.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(t=>t.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const t=this.value.filter(e=>e.selected);this.minSelected&&t.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const t=this.value[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const t=!this.value[this.cursor].selected;this.value.filter(e=>!e.disabled).forEach(e=>e.selected=t),this.render()}_(t,e){if(t===" ")this.handleSpaceToggle();else if(t==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${figures$2.arrowUp}/${figures$2.arrowDown}: Highlight option
    ${figures$2.arrowLeft}/${figures$2.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(t,e,r,l){const h=(e.selected?color$3.green(figures$2.radioOn):figures$2.radioOff)+" "+l+" ";let n,a;return e.disabled?n=t===r?color$3.gray().underline(e.title):color$3.strikethrough().gray(e.title):(n=t===r?color$3.cyan().underline(e.title):e.title,t===r&&e.description&&(a=` - ${e.description}`,(h.length+n.length+a.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(a=`
`+wrap$1(e.description,{margin:h.length,width:this.out.columns})))),h+n+color$3.gray(a||"")}paginateOptions(t){if(t.length===0)return color$3.red("No matches for this query.");let{startIndex:e,endIndex:r}=entriesToDisplay$1(this.cursor,t.length,this.optionsPerPage),l,h=[];for(let n=e;n<r;n++)n===e&&e>0?l=figures$2.arrowUp:n===r-1&&r<t.length?l=figures$2.arrowDown:l=" ",h.push(this.renderOption(this.cursor,t[n],n,l));return`
`+h.join(`
`)}renderOptions(t){return this.done?"":this.paginateOptions(t)}renderDoneOrInstructions(){if(this.done)return this.value.filter(e=>e.selected).map(e=>e.title).join(", ");const t=[color$3.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(color$3.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(cursor$3.hide),super.render();let t=[style$3.symbol(this.done,this.aborted),color$3.bold(this.msg),style$3.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=color$3.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.value),this.out.write(this.clear+t),this.clear=clear$3(t,this.out.columns)}};var multiselect=MultiselectPrompt$1;const color$2=kleur,Prompt$1=prompt$1,{erase:erase$1,cursor:cursor$2}=src,{style:style$2,clear:clear$2,figures:figures$1,wrap,entriesToDisplay}=util,getVal=(s,t)=>s[t]&&(s[t].value||s[t].title||s[t]),getTitle=(s,t)=>s[t]&&(s[t].title||s[t].value||s[t]),getIndex=(s,t)=>{const e=s.findIndex(r=>r.value===t||r.title===t);return e>-1?e:void 0};class AutocompletePrompt extends Prompt$1{constructor(t={}){super(t),this.msg=t.message,this.suggest=t.suggest,this.choices=t.choices,this.initial=typeof t.initial=="number"?t.initial:getIndex(t.choices,t.initial),this.select=this.initial||t.cursor||0,this.i18n={noMatches:t.noMatches||"no matches found"},this.fallback=t.fallback||this.initial,this.clearFirst=t.clearFirst||!1,this.suggestions=[],this.input="",this.limit=t.limit||10,this.cursor=0,this.transform=style$2.render(t.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=clear$2("",this.out.columns),this.complete(this.render),this.render()}set fallback(t){this._fb=Number.isSafeInteger(parseInt(t))?parseInt(t):t}get fallback(){let t;return typeof this._fb=="number"?t=this.choices[this._fb]:typeof this._fb=="string"&&(t={title:this._fb}),t||this._fb||{title:this.i18n.noMatches}}moveSelect(t){this.select=t,this.suggestions.length>0?this.value=getVal(this.suggestions,t):this.value=this.fallback.value,this.fire()}async complete(t){const e=this.completing=this.suggest(this.input,this.choices),r=await e;if(this.completing!==e)return;this.suggestions=r.map((h,n,a)=>({title:getTitle(a,n),value:getVal(a,n),description:h.description})),this.completing=!1;const l=Math.max(r.length-1,0);this.moveSelect(Math.min(l,this.select)),t&&t()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,e){let r=this.input.slice(0,this.cursor),l=this.input.slice(this.cursor);this.input=`${r}${t}${l}`,this.cursor=r.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let t=this.input.slice(0,this.cursor-1),e=this.input.slice(this.cursor);this.input=`${t}${e}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let t=this.input.slice(0,this.cursor),e=this.input.slice(this.cursor+1);this.input=`${t}${e}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(t,e,r,l){let h,n=r?figures$1.arrowUp:l?figures$1.arrowDown:" ",a=e?color$2.cyan().underline(t.title):t.title;return n=(e?color$2.cyan(figures$1.pointer)+" ":"  ")+n,t.description&&(h=` - ${t.description}`,(n.length+a.length+h.length>=this.out.columns||t.description.split(/\r?\n/).length>1)&&(h=`
`+wrap(t.description,{margin:3,width:this.out.columns}))),n+" "+a+color$2.gray(h||"")}render(){if(this.closed)return;this.firstRender?this.out.write(cursor$2.hide):this.out.write(clear$2(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:e}=entriesToDisplay(this.select,this.choices.length,this.limit);if(this.outputText=[style$2.symbol(this.done,this.aborted,this.exited),color$2.bold(this.msg),style$2.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const r=this.suggestions.slice(t,e).map((l,h)=>this.renderOption(l,this.select===h+t,h===0&&t>0,h+t===e-1&&e<this.choices.length)).join(`
`);this.outputText+=`
`+(r||color$2.gray(this.fallback.title))}this.out.write(erase$1.line+cursor$2.to(0)+this.outputText)}}var autocomplete=AutocompletePrompt;const color$1=kleur,{cursor:cursor$1}=src,MultiselectPrompt=multiselect,{clear:clear$1,style:style$1,figures}=util;class AutocompleteMultiselectPrompt extends MultiselectPrompt{constructor(t={}){t.overrideRender=!0,super(t),this.inputValue="",this.clear=clear$1("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const t=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(r=>this.inputValue?!!(typeof r.title=="string"&&r.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof r.value=="string"&&r.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const e=this.filteredOptions.findIndex(r=>r===t);this.cursor=e<0?0:e,this.render()}handleSpaceToggle(){const t=this.filteredOptions[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}handleInputChange(t){this.inputValue=this.inputValue+t,this.updateFilteredOptions()}_(t,e){t===" "?this.handleSpaceToggle():this.handleInputChange(t)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${figures.arrowUp}/${figures.arrowDown}: Highlight option
    ${figures.arrowLeft}/${figures.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:color$1.gray("Enter something to filter")}
`}renderOption(t,e,r){let l;return e.disabled?l=t===r?color$1.gray().underline(e.title):color$1.strikethrough().gray(e.title):l=t===r?color$1.cyan().underline(e.title):e.title,(e.selected?color$1.green(figures.radioOn):figures.radioOff)+"  "+l}renderDoneOrInstructions(){if(this.done)return this.value.filter(e=>e.selected).map(e=>e.title).join(", ");const t=[color$1.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(color$1.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(cursor$1.hide),super.render();let t=[style$1.symbol(this.done,this.aborted),color$1.bold(this.msg),style$1.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=color$1.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+t),this.clear=clear$1(t,this.out.columns)}}var autocompleteMultiselect=AutocompleteMultiselectPrompt;const color=kleur,Prompt=prompt$1,{style,clear}=util,{erase,cursor}=src;class ConfirmPrompt extends Prompt{constructor(t={}){super(t),this.msg=t.message,this.value=t.initial,this.initialValue=!!t.initial,this.yesMsg=t.yes||"yes",this.yesOption=t.yesOption||"(Y/n)",this.noMsg=t.no||"no",this.noOption=t.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,e){return t.toLowerCase()==="y"?(this.value=!0,this.submit()):t.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(cursor.hide):this.out.write(clear(this.outputText,this.out.columns)),super.render(),this.outputText=[style.symbol(this.done,this.aborted),color.bold(this.msg),style.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:color.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(erase.line+cursor.to(0)+this.outputText))}}var confirm=ConfirmPrompt,elements={TextPrompt:text,SelectPrompt:select,TogglePrompt:toggle,DatePrompt:date,NumberPrompt:number,MultiselectPrompt:multiselect,AutocompletePrompt:autocomplete,AutocompleteMultiselectPrompt:autocompleteMultiselect,ConfirmPrompt:confirm};(function(s){const t=s,e=elements,r=n=>n;function l(n,a,b={}){return new Promise((d,M)=>{const w=new e[n](a),u=b.onAbort||r,m=b.onSubmit||r,S=b.onExit||r;w.on("state",a.onState||r),w.on("submit",D=>d(m(D))),w.on("exit",D=>d(S(D))),w.on("abort",D=>M(u(D)))})}t.text=n=>l("TextPrompt",n),t.password=n=>(n.style="password",t.text(n)),t.invisible=n=>(n.style="invisible",t.text(n)),t.number=n=>l("NumberPrompt",n),t.date=n=>l("DatePrompt",n),t.confirm=n=>l("ConfirmPrompt",n),t.list=n=>{const a=n.separator||",";return l("TextPrompt",n,{onSubmit:b=>b.split(a).map(d=>d.trim())})},t.toggle=n=>l("TogglePrompt",n),t.select=n=>l("SelectPrompt",n),t.multiselect=n=>{n.choices=[].concat(n.choices||[]);const a=b=>b.filter(d=>d.selected).map(d=>d.value);return l("MultiselectPrompt",n,{onAbort:a,onSubmit:a})},t.autocompleteMultiselect=n=>{n.choices=[].concat(n.choices||[]);const a=b=>b.filter(d=>d.selected).map(d=>d.value);return l("AutocompleteMultiselectPrompt",n,{onAbort:a,onSubmit:a})};const h=(n,a)=>Promise.resolve(a.filter(b=>b.title.slice(0,n.length).toLowerCase()===n.toLowerCase()));t.autocomplete=n=>(n.suggest=n.suggest||h,n.choices=[].concat(n.choices||[]),l("AutocompletePrompt",n))})(prompts$1);const prompts=prompts$1,passOn=["suggest","format","onState","validate","onRender","type"],noop=()=>{};async function prompt(s=[],{onSubmit:t=noop,onCancel:e=noop}={}){const r={},l=prompt._override||{};s=[].concat(s);let h,n,a,b,d,M;const w=async(u,m,S=!1)=>{if(!(!S&&u.validate&&u.validate(m)!==!0))return u.format?await u.format(m,r):m};for(n of s)if({name:b,type:d}=n,typeof d=="function"&&(d=await d(h,{...r},n),n.type=d),!!d){for(let u in n){if(passOn.includes(u))continue;let m=n[u];n[u]=typeof m=="function"?await m(h,{...r},M):m}if(M=n,typeof n.message!="string")throw new Error("prompt message is required");if({name:b,type:d}=n,prompts[d]===void 0)throw new Error(`prompt type (${d}) is not defined`);if(l[n.name]!==void 0&&(h=await w(n,l[n.name]),h!==void 0)){r[b]=h;continue}try{h=prompt._injected?getInjectedAnswer(prompt._injected,n.initial):await prompts[d](n),r[b]=h=await w(n,h,!0),a=await t(n,h,r)}catch{a=!await e(n,r)}if(a)return r}return r}function getInjectedAnswer(s,t){const e=s.shift();if(e instanceof Error)throw e;return e===void 0?t:e}function inject(s){prompt._injected=(prompt._injected||[]).concat(s)}function override(s){prompt._override=Object.assign({},s)}var lib=Object.assign(prompt,{prompt,prompts,inject,override});const K=getDefaultExportFromCjs(lib);let enabled=!0;const globalVar=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let supportLevel=0;if(globalVar.process&&globalVar.process.env&&globalVar.process.stdout){const{FORCE_COLOR:s,NODE_DISABLE_COLORS:t,NO_COLOR:e,TERM:r,COLORTERM:l}=globalVar.process.env;t||e||s==="0"?enabled=!1:s==="1"||s==="2"||s==="3"?enabled=!0:r==="dumb"?enabled=!1:"CI"in globalVar.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(h=>h in globalVar.process.env)?enabled=!0:enabled=process.stdout.isTTY,enabled&&(process.platform==="win32"||l&&(l==="truecolor"||l==="24bit")?supportLevel=3:r&&(r.endsWith("-256color")||r.endsWith("256"))?supportLevel=2:supportLevel=1)}let options={enabled,supportLevel};function kolorist(s,t,e=1){const r=`\x1B[${s}m`,l=`\x1B[${t}m`,h=new RegExp(`\\x1b\\[${t}m`,"g");return n=>options.enabled&&options.supportLevel>=e?r+(""+n).replace(h,r)+l:""+n}const reset=kolorist(0,0),red=kolorist(31,39),green=kolorist(32,39),yellow=kolorist(33,39),blue=kolorist(34,39),lightBlue=kolorist(94,39);function generateConfigFileContent(s,t){return`import { UserConfig } from '@hyperoracle/zkgraph-cli'

export default {
  // Set up your config here${s?"":`
  // Please set up your private key`}
  UserPrivateKey: ${s?`'${s}'`:"''"},${t?"":`
  // Please set up your pinata JWT`}
  PinataJWT: '${t}',
} as UserConfig
`}const y=I(process.argv.slice(2),{string:["_"]}),v=process.cwd(),k="zkgraph-project",N=[{name:"hello",display:"Hello",color:blue},{name:"event",display:"Event",color:yellow},{name:"storage",display:"Storage",color:green},{name:"multiaddr",display:"Multiaddr",color:green},{name:"uniswapprice",display:"Uniswapprice",color:lightBlue}],P=N.map(s=>s.name),U={_gitignore:".gitignore"};async function init(s,t){let e=s||k;const r=()=>e==="."?i__default.basename(i__default.resolve()):e;let l;try{l=await K([{type:s?null:"text",name:"projectName",message:reset("Project name:"),initial:k,onState:p=>{e=x(p.value)||k}},{type:()=>!o__default.existsSync(e)||V(e)?null:"confirm",name:"overwrite",message:()=>`${e==="."?"Current directory":`Target directory "${e}"`} is not empty. Remove existing files and continue?`},{type:(p,{overwrite:O})=>{if(O===!1)throw new Error(`${red("\u2716")} Operation cancelled`);return null},name:"overwriteChecker"},{type:()=>_(r())?null:"text",name:"packageName",message:reset("Package name:"),initial:()=>B(r()),validate:p=>_(p)||"Invalid package.json name"},{type:t&&P.includes(t)?null:"select",name:"framework",message:typeof t=="string"&&!P.includes(t)?reset(`"${t}" isn't a valid template. Please choose from below: `):reset("Select a template:"),initial:0,choices:N.map(p=>{const O=p.color;return{title:O(p.display||p.name),value:p}})},{type:"password",name:"privateKey",message:"Input your private key:"},{type:"password",name:"pinataJWT",message:"Input your pinata JWT:"}],{onCancel:()=>{throw new Error(`${red("\u2716")} Operation cancelled`)}})}catch(p){console.log(p.message);return}const{framework:h,overwrite:n,packageName:a,privateKey:b="",pinataJWT:d}=l,M=i__default.join(v,e);n?H(M):o__default.existsSync(M)||o__default.mkdirSync(M,{recursive:!0});const w=h?.name||t,u=q(process.env.npm_config_user_agent),m=u?u.name:"npm";console.log(`
Scaffolding project in ${M}...`);const S=i__default.resolve(node_url.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:_documentCurrentScript&&_documentCurrentScript.src||new URL("index.cjs",document.baseURI).href),"../../templates",`template-${w}`),D=(p,O)=>{const g=i__default.join(M,U[p]??p);O?o__default.writeFileSync(g,O):z(i__default.join(S,p),g)},j=o__default.readdirSync(S);for(const p of j.filter(O=>O!=="package.json"||"zkgraph.config.ts"))D(p);const C=JSON.parse(o__default.readFileSync(i__default.join(S,"package.json"),"utf-8"));C.name=a||r(),D("package.json",`${JSON.stringify(C,null,2)}
`);const A=b.startsWith("0x")?b:`0x${b}`,T=generateConfigFileContent(A,d);D("zkgraph.config.ts",T);const f=i__default.relative(v,M);switch(console.log(`
Done. Now run:
`),M!==v&&console.log(`  cd ${f.includes(" ")?`"${f}"`:f}`),m){case"yarn":console.log("  yarn"),console.log("  yarn <cmd>");break;default:console.log(`  ${m} install`),console.log(`  ${m} run <cmd>`);break}console.log(),console.log("Read docs: https://github.com/hyperoracle/zkgraph-cli#cli"),console.log()}async function defaultInit(){const s=x(y._[0]),t=y.template||y.t;await init(s,t)}function x(s){return s?.trim().replace(/\/+$/g,"")}function V(s){const t=o__default.readdirSync(s);return t.length===0||t.length===1&&t[0]===".git"}function _(s){return/^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$/.test(s)}function B(s){return s.trim().toLowerCase().replace(/\s+/g,"-").replace(/^[._]/,"").replace(/[^a-z\d\-~]+/g,"-")}function H(s){if(o__default.existsSync(s))for(const t of o__default.readdirSync(s))t!==".git"&&o__default.rmSync(i__default.resolve(s,t),{recursive:!0,force:!0})}function q(s){if(!s)return;const t=s.split(" ")[0].split("/");return{name:t[0],version:t[1]}}function G(s,t){o__default.mkdirSync(t,{recursive:!0});for(const e of o__default.readdirSync(s)){const r=i__default.resolve(s,e),l=i__default.resolve(t,e);z(r,l)}}function z(s,t){o__default.statSync(s).isDirectory()?G(s,t):o__default.copyFileSync(s,t)}exports.defaultInit=defaultInit,exports.init=init;
